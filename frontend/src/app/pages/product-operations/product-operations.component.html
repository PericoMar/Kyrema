
<main class="product-page">
    <section class="listado section-block">
        <header class="space-between-header">
            <h1>Listado de {{ productName }}</h1>
            <div class="space-between header-buttons">
                <a [routerLink]="['/historial', productUrl]" routerLinkActive="active" class="button-header see-history">Ver historial</a>
                <button class="button-header clear-filters" (click)="clearFilters()">Limpiar filtros</button>
                <a [routerLink]="['/anulados', productUrl]" routerLinkActive="active" class="button-header">Ver anulados</a>
            </div>
        </header>
        <app-table 
        (productSelectedChange)="onProductSelectedChanged($event)" 
        [columnDefs]="columnDefs" 
        [rowData]="rowData"
        [paginationPageSize]="paginationPageSize"
        [loadingRows]="loadingRows"
        ></app-table>
        <!-- (pageChanged)="onPageChanged($event)" -->
    </section>
    <section class="datos-producto section-block">
        @if(camposLoaded){
            <h2>Formulario de gesti√≥n</h2>
            <app-product-form 
            [product]="productSelected" 
            [letras_identificacion]="productUrl" 
            [campos]="camposFormulario"
            [camposSubproductos]="camposSubproductos"
            (formLoadedChange)="handleFormLoadedChange($event)"
            ></app-product-form>
        } @else {
            <div>
                <p>Cargando...</p>
            </div>
        }

    </section>
</main>
